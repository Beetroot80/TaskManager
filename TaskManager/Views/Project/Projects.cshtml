@model IEnumerable<TaskManager.Models.ProjectModel>
<script type="text/javascript">
    function setMaxHeight()
    {
        var h = jQuery(".body-content").height();
        h = h-(h*0.1);
        jQuery("#project-area").height(h);
        jQuery("#project-area").css("maxHeight", h);
    }
    jQuery("document").ready(function () {
        setMaxHeight();
    });
    jQuery("Window").resize(setHeight());
</script>

<div id="project-wrapper">
    <aside id="project-area">
        <div>
            <div id="project-panel">
                <div class="input-group" id="project-search">
                    <input type="text" class="form-control" placeholder="Search for...">
                    <span class="input-group-btn">
                        <button class="btn btn-default disabled" type="button">Search</button>
                    </span>
                </div>
            </div>
            <div id="project">
                <ul id="project-list">
                    @foreach (var item in Model)
            {
                        <li>
                            <div class="task-title">
                                @Ajax.ActionLink(@item.Title, "ViewTask", "Project", new { projectId = item.Id }, new AjaxOptions
                       {
                           HttpMethod = "Post",
                           InsertionMode = InsertionMode.Replace,
                           UpdateTargetId = "task-results",
                           LoadingElementId = "loading"
                       })
                            </div>
                            <div class="project-description">
                                <textarea readonly>@item.Description</textarea>
                            </div>
                            <div class="project-icons">
                                <span id="users" class="glyphicon glyphicon-user">@item.ClientsCount</span>
                                <span id="tasks" class="glyphicon glyphicon-tasks">@item.TaskCount</span>
                            </div>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </aside>

    <section id="task-area">
        <img src="~/Content/gifs/ring-alt.gif" id="loading" style="display: none; position: fixed; margin: 25% 0 0 25%; z-index: 1000" />
        <div id="task-results">
        </div>
    </section>
</div>

<script type="text/javascript">
    jQuery("#project-area .task-title a").click(function () {
        jQuery("#project-area .task-title a.selected").removeClass("selected");
        jQuery(this).addClass("selected")
    });
</script>